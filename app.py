import streamlit as st

# --- מאגר נתונים: פרקי תהילים ---
psalms_db = {
    20: """**פרק כ':**\nלַמְנַצֵּחַ מִזְמוֹר לְדָוִד. יַעַנְךָ יְהוָה בְּיוֹם צָרָה... (השלם את הטקסט המלא כאן)...""",
    21: """**פרק כ"א:**\nלַמְנַצֵּחַ מִזְמוֹר לְדָוִד. יְהוָה בְּעָזְּךָ יִשְׂמַח מֶלֶךְ...""",
    23: """**פרק כ"ג:**\nמִזְמוֹר לְדָוִד יְהוָה רֹעִי לֹא אֶחְסָר...""",
    24: """**פרק כ"ד:**\nלְדָוִד מִזְמוֹר לַיהוָה הָאָרֶץ וּמְלוֹאָהּ...""",
    29: """**פרק כ"ט:**\nמִזְמוֹר לְדָוִד הָבוּ לַיהוָה בְּנֵי אֵלִים...""",
    31: """**פרק ל"א:**\nלַמְנַצֵּחַ מִזְמוֹר לְדָוִד. בְּךָ יְהוָה חָסִיתִי...""",
    32: """**פרק ל"ב:**\nלְדָוִד מַשְׂכִּיל אַשְׁרֵי נְשׂוּי פֶּשַׁע...""",
    57: """**פרק נ"ז:**\nלַמְנַצֵּחַ אַל תַּשְׁחֵת לְדָוִד מִכְתָּם...""",
    70: """**פרק ע':**\nלַמְנַצֵּחַ לְדָוִד לְהַזְכִּיר...""",
    72: """**פרק ע"ב:**\nלִשְׁלֹמֹה אֱלֹהִים מִשְׁפָּטֶיךָ לְמֶלֶךְ תֵּן...""",
    91: """**פרק צ"א:**\nיֹשֵׁב בְּסֵתֶר עֶלְיוֹן בְּצֵל שַׁדַּי יִתְלוֹנָן...""",
    102: """**פרק ק"ב:**\nתְּפִלָּה לְעָנִי כִי יַעֲטֹף...""",
    103: """**פרק ק"ג:**\nלְדָוִד בָּרֲכִי נַפְשִׁי אֶת יְהוָה...""",
    108: """**פרק ק"ח:**\nשִׁיר מִזְמוֹר לְדָוִד. נָכוֹן לִבִּי אֱלֹהִים...""",
    120: """**פרק ק"כ:**\nשִׁיר הַמַּעֲלוֹת אֶל יְהוָה בַּצָּרָתָה לִּי...""",
    124: """**פרק קכ"ד:**\nשִׁיר הַמַּעֲלוֹת לְדָוִד לוּלֵי יְהוָה..."""
}

# --- הגדרת המערכת והסגולות ---
segulot = {
    "זיווג הגון": {
        "chapters": [31, 32, 70, 72, 124],
        "instructions": "לקרוא 40 יום רצוף (עד שקיעה)"
    },
    "עין הרע": {
        "chapters": [31],
        "instructions": "לקרוא כל יום (עד שקיעה)"
    },
    "רפואה": {
        "chapters": [57, 108, 120],
        "instructions": "לקרוא כל יום (עד שקיעה)"
    },
    "פרנסה": {
        "chapters": [20, 21, 23, 24, 29, 91],
        "instructions": "לקרוא 40 יום רצוף (עד שקיעה)"
    },
    "הצלחה במשפט": {
        "chapters": [21, 29, 91],
        "instructions": "מהיום ועד סיום המשפט לקרוא בכל יום"
    },
    "זרע של קיימא (בנים)": {
        "chapters": [102, 103],
        "instructions": "לבקש זרע של קיימא בזכות רבינו יצחק כדורי זיע\"א"
    }
}

# --- הגדרת האתר (UI) ---
# כיוון הטקסט לימין (RTL)
st.markdown(
    """
    <style>
    .stApp {
        direction: rtl;
        text-align: right;
    }
    div[data-testid="stMarkdownContainer"] p {
        font-size: 1.1em;
    }
    </style>
    """,
    unsafe_allow_html=True,
)

st.title("🕯️ סגולות רבינו יצחק כדורי זיע\"א")
st.subheader("יום ההילולה - זכותו תגן עלינו")

# תפריט בחירה
selected_option = st.selectbox(
    "בחר את הסגולה הרצויה:",
    list(segulot.keys())
)

# הצגת הסגולה הנבחרת
if selected_option:
    data = segulot[selected_option]
    
    st.info(f"💡 **הוראות:** {data['instructions']}")
    
    st.divider()
    
    for chap_num in data['chapters']:
        st.markdown(f"### תהילים פרק {chap_num}")
        if chap_num in psalms_db:
            st.write(psalms_db[chap_num])
        else:
            st.warning(f"טקסט פרק {chap_num} יתווסף בקרוב.")
        st.divider()

st.caption("נבנה לכבוד הצדיק.")
